(this["webpackJsonpmy-kama"]=this["webpackJsonpmy-kama"]||[]).push([[7],{326:function(t,e,s){"use strict";s.d(e,"b",(function(){return j})),s.d(e,"a",(function(){return b})),s.d(e,"c",(function(){return h}));var r=s(5),o=s(324),n=(s(0),s(327)),c=s.n(n),a=s(369),i=s(164),u=s(4),l=function(t){t.input;var e=t.meta,s=(t.child,Object(o.a)(t,["input","meta","child"])),r=e.touched&&e.error;return Object(u.jsxs)(a.a,{className:c.a.formControl+" "+(r?c.a.error:""),children:[Object(u.jsx)(a.a,{children:s.children}),r&&Object(u.jsx)("span",{children:e.error})]})},j=function(t){var e=t.input,s=(t.meta,t.child,Object(o.a)(t,["input","meta","child"]));return Object(u.jsx)(l,Object(r.a)(Object(r.a)({},t),{},{children:Object(u.jsx)("textarea",Object(r.a)(Object(r.a)({},e),s))}))},b=function(t){var e=t.input,s=(t.meta,t.child,Object(o.a)(t,["input","meta","child"]));return Object(u.jsx)(l,Object(r.a)(Object(r.a)({},t),{},{children:Object(u.jsx)("input",Object(r.a)(Object(r.a)({},e),s))}))},h=function(t,e,s,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return Object(u.jsxs)("div",{children:[Object(u.jsx)(i.a,Object(r.a)({placeholder:t,name:e,validate:s,component:o},n))," ",c]})}},327:function(t,e,s){t.exports={formControl:"FormsControls_formControl__1Vuvz",error:"FormsControls_error__1aIVV",formSummaryError:"FormsControls_formSummaryError__3y7eP"}},330:function(t,e,s){"use strict";s.d(e,"c",(function(){return r})),s.d(e,"b",(function(){return o})),s.d(e,"a",(function(){return n}));var r=function(t){if(!t)return"\u041f\u043e\u043b\u0435 \u043f\u0443\u0441\u0442\u043e"},o=function(t){return function(e){if(e&&e.length>t)return"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u043d\u0430 ".concat(t," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")}},n=function(t){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t)?t?void 0:"\u041f\u043e\u043b\u0435 \u043f\u0443\u0441\u0442\u043e":"\u041d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d email"}},331:function(t,e,s){"use strict";s.d(e,"a",(function(){return d}));var r=s(5),o=s(95),n=s(96),c=s(98),a=s(97),i=s(0),u=s.n(i),l=s(62),j=s(9),b=s(4),h=function(t){return{isAuth:t.auth.isAuth}},d=function(t){var e=function(e){Object(c.a)(i,e);var s=Object(a.a)(i);function i(){return Object(o.a)(this,i),s.apply(this,arguments)}return Object(n.a)(i,[{key:"render",value:function(){return this.props.isAuth?Object(b.jsx)(t,Object(r.a)({},this.props)):Object(b.jsx)(j.a,{to:"/login"})}}]),i}(u.a.Component);return Object(l.b)(h)(e)}},349:function(t,e,s){"use strict";e.a=s.p+"static/media/ava.906be2ae.jpg"},350:function(t,e,s){t.exports={userPhoto:"Profile_userPhoto__1B6et",content:"Profile_content__3Jzc5",descriptionBlock:"Profile_descriptionBlock__12mn3",inputFile:"Profile_inputFile__2RR4Y",infoBlock:"Profile_infoBlock__eSORO",formControl:"Profile_formControl__33bgn",error:"Profile_error__Ocf_C",formSummaryError:"Profile_formSummaryError__2Eq7Z"}},422:function(t,e,s){t.exports={content:"Profile_content__3ca6h",descriptionBlock:"Profile_descriptionBlock__3zj1O",userPhoto:"Profile_userPhoto__2H_hU",inputFile:"Profile_inputFile__3qvWX"}},423:function(t,e,s){t.exports={content:"MyPosts_content__1iijG",postBlock:"MyPosts_postBlock__HMTQe",textarea:"MyPosts_textarea__2SsWz"}},424:function(t,e,s){t.exports={item:"Post_item__aT7ar"}},463:function(t,e,s){"use strict";s.r(e);var r=s(5),o=s(95),n=s(96),c=s(98),a=s(97),i=s(0),u=s.n(i),l=s(99),j=s(350),b=s.n(j),h=s(111),d=s(317),p=(s(422),s(4)),f=function(t){Object(c.a)(s,t);var e=Object(a.a)(s);function s(){var t;Object(o.a)(this,s);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(t=e.call.apply(e,[this].concat(n))).state={editMode:!1,status:t.props.status},t.activateEditMode=function(){t.setState({editMode:!0})},t.deactivateEditMode=function(){t.setState({editMode:!1}),t.props.updateStatus(t.state.status)},t.onStatusChange=function(e){t.setState({status:e.currentTarget.value})},t}return Object(n.a)(s,[{key:"componentDidUpdate",value:function(t,e){t.status!==this.props.status&&this.setState({status:this.props.status}),console.log("componentDidUpdate")}},{key:"render",value:function(){return Object(p.jsxs)(d.a,{children:[!this.state.editMode&&Object(p.jsx)(d.a,{children:Object(p.jsx)("span",{onDoubleClick:this.activateEditMode,children:this.props.status||"---"})}),this.state.editMode&&Object(p.jsx)(d.a,{children:Object(p.jsx)("input",{onChange:this.onStatusChange,onBlur:this.deactivateEditMode,autoFocus:!0,value:this.state.status})})]})}}]),s}(i.Component),O=s(349),x=s(310),m=s(369),_=s(472),v=s(326),P=s(165),k=s(305),g=s(462),y=Object(P.a)({form:"edit-profile"})((function(t){var e=t.handleSubmit,s=t.profile,r=t.error;return Object(p.jsxs)("form",{onSubmit:e,children:[Object(p.jsx)(d.a,{children:Object(p.jsx)("button",{children:"save"})}),Object(p.jsx)(k.a,{sx:{width:"100%"},spacing:2,children:r&&Object(p.jsx)(g.a,{variant:"outlined",severity:"error",children:r})}),Object(p.jsxs)(d.a,{className:b.a.infoBlock,children:[Object(p.jsxs)("h2",{children:["\u041f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f: ",Object(v.c)("Full name","fullName",[],v.a)]}),Object(p.jsxs)("h3",{children:["Looking for a job: ",Object(v.c)("","lookingForAJob",[],v.a,{type:"checkbox"})]}),Object(p.jsxs)("h3",{children:["My professional skills:",Object(v.c)("Professional skills","lookingForAJobDescription",[],v.b)]}),Object(p.jsxs)("h3",{children:["About Me:",Object(v.c)("About me","aboutMe",[],v.b)]})]}),Object(p.jsxs)(d.a,{className:b.a.contactsBlok,children:[Object(p.jsx)(d.a,{children:Object(p.jsx)("b",{children:"Contact: "})}),Object.keys(s.contacts).map((function(t){return Object(p.jsx)(_.a,{children:Object(p.jsxs)(d.a,{children:[t,": ",Object(v.c)(t,"contacts."+t,[],v.a)]})})}))]})]})})),S=function(t){var e=t.contactTitle,s=t.contactValue;t.key;return Object(p.jsx)(d.a,{children:Object(p.jsx)(d.a,{children:!!s&&Object(p.jsxs)(d.a,{children:[e," : ",s]})})})},M=function(t){return Object(p.jsxs)(_.a,{children:[Object(p.jsx)(d.a,{children:t.isOwner||Object(p.jsx)("button",{onClick:t.goToEditMode,children:"edit"})}),Object(p.jsxs)(d.a,{className:b.a.infoBlock,children:[Object(p.jsxs)("h2",{children:["\u041f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f:",t.profile.fullName]}),Object(p.jsxs)("h3",{children:["Looking for a job: ",t.profile.lookingForAJob?"yes":"no"]}),t.profile.lookingForAJob&&Object(p.jsxs)("h3",{children:["My professional skills:",t.profile.lookingForAJobDescription]})]}),Object(p.jsx)(d.a,{className:b.a.aboutMeBlock,children:Object(p.jsxs)("h3",{children:["About Me:",t.profile.aboutMe]})}),Object(p.jsx)(d.a,{className:b.a.contactsBlok,children:Object(p.jsxs)(d.a,{children:[Object(p.jsx)(d.a,{children:Object(p.jsx)("b",{children:"Contact:"})}),Object.keys(t.profile.contacts).map((function(e){return Object(p.jsx)(S,{contactTitle:e,contactValue:t.profile.contacts[e]},e)}))]})})]})},C=function(t){var e=t.profile,s=t.saveProfile,r=t.status,o=t.updateStatus,n=t.isOwner,c=t.savePhoto,a=Object(i.useState)(!1),u=Object(l.a)(a,2),j=u[0],d=u[1];if(!e)return Object(p.jsx)(h.a,{});return Object(p.jsx)(x.a,{children:Object(p.jsxs)(_.a,{className:b.a.descriptionBlock,children:[Object(p.jsxs)(m.a,{children:[Object(p.jsx)("img",{src:e.photos.large||O.a,className:b.a.userPhoto}),n||Object(p.jsx)("input",{type:"file",className:b.a.inputFile,onChange:function(t){t.target.files.length&&c(t.target.files[0])}})]}),Object(p.jsx)(m.a,{children:j?Object(p.jsx)(y,{initialValues:e,profile:e,onSubmit:function(t){s(t).then((function(){d(!1)}))}}):Object(p.jsx)(M,{goToEditMode:function(){d(!0)},profile:e,isOwner:n})}),Object(p.jsxs)(m.a,{className:b.a.statusBlock,children:[Object(p.jsx)("h2",{children:"My Status:"}),Object(p.jsx)(f,{status:r,updateStatus:o})]})]})})},A=s(62),B=s(105),F=s(21),N=s(164),w=s(330),E=s(423),T=s.n(E),I=s(424),J=s.n(I),U=function(t){return Object(p.jsxs)(d.a,{className:J.a.item,children:[Object(p.jsx)("img",{src:"https://cs6.pikabu.ru/avatars/2097/x2097369-1271064885.png"}),t.message,Object(p.jsxs)(d.a,{children:[Object(p.jsx)(d.a,{children:"Like"})," ",t.quantity]})]})},D=Object(w.b)(10),z=Object(P.a)({form:"profileAddPostForm"})((function(t){return Object(p.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(p.jsx)(d.a,{children:Object(p.jsx)(N.a,{name:"newPostText",component:v.b,placeholder:"Enter your message",validate:[w.c,D]})}),Object(p.jsx)(d.a,{children:Object(p.jsx)("button",{children:"Add Post"})})]})})),V=u.a.memo((function(t){var e=Object(F.a)(t.posts).reverse().map((function(t){return Object(p.jsx)(U,{message:t.message,likesCount:t.likesCount})}));return Object(p.jsxs)(d.a,{className:T.a.postsBlock,children:[Object(p.jsx)("h3",{children:"My posts"}),Object(p.jsx)(d.a,{children:Object(p.jsx)(z,{onSubmit:function(e){t.addPost(e.newPostText)}})}),Object(p.jsx)(d.a,{className:T.a.posts,children:e})]})})),Z=Object(A.b)((function(t){return{posts:t.profilePage.posts,newPostText:t.profilePage.newPostText}}),(function(t){return{addPost:function(e){t(Object(B.a)(e))}}}))(V),q=function(t){return Object(p.jsxs)(d.a,{children:[Object(p.jsx)(C,{profile:t.profile,status:t.status,updateStatus:t.updateStatus,isOwner:t.isOwner,savePhoto:t.savePhoto,saveProfile:t.saveProfile}),Object(p.jsx)(Z,{})]})},L=s(331),R=s(43),H=s(9),W=function(t){Object(c.a)(s,t);var e=Object(a.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(n.a)(s,[{key:"refreshProfile",value:function(){var t=this.props.match.params.userId;t||(t=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(t),this.props.getStatus(t)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e,s){this.props.match.params.userId!=t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(p.jsx)(d.a,{children:Object(p.jsx)(q,Object(r.a)(Object(r.a)({},this.props),{},{profile:this.props.profile,isOwner:!!this.props.match.params.userId,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}))})}}]),s}(i.Component);e.default=Object(R.d)(Object(A.b)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.userId,isAuth:t.auth.isAuth}}),{getUserProfile:B.d,getStatus:B.c,updateStatus:B.g,savePhoto:B.e,saveProfile:B.f}),H.f,L.a)(W)}}]);
//# sourceMappingURL=7.0c249db0.chunk.js.map